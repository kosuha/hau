//
//  PrivacyPolicyView.swift
//  swift-hau
//
//  Created by Seonho Kim on 4/11/25.
//

import SwiftUI

struct PrivacyPolicyView: View {
    @Environment(\.dismiss) var dismiss
    
    // 개인정보처리방침 내용
    private let privacyPolicyContent = """
    # 개인정보처리방침

    ## 1. 개인정보의 처리 목적

    HAU('https://hau-app.com' 이하 'HAU')은(는) 다음의 목적을 위하여 개인정보를 처리하고 있으며, 다음의 목적 이외의 용도로는 이용하지 않습니다.
    - 회원 가입 및 관리
    - 서비스 제공 및 개선
    - 마케팅 및 광고에의 활용

    ## 2. 개인정보의 처리 및 보유 기간

    ① HAU은(는) 법령에 따른 개인정보 보유·이용기간 또는 정보주체로부터 개인정보를 수집 시에 동의 받은 개인정보 보유·이용기간 내에서 개인정보를 처리·보유합니다.

    ② 각각의 개인정보 처리 및 보유 기간은 다음과 같습니다.
    - 회원 가입 및 관리: 회원 탈퇴 시까지
    - 서비스 이용 기록: 서비스 종료 후 3개월까지

    ## 3. 개인정보의 제3자 제공

    HAU은(는) 정보주체의 별도 동의, 법률의 특별한 규정 등 개인정보 보호법 제17조 및 제18조에 해당하는 경우에만 개인정보를 제3자에게 제공합니다.

    ## 4. 개인정보처리 위탁

    HAU은(는) 원활한 개인정보 업무처리를 위하여 다음과 같이 개인정보 처리업무를 위탁하고 있습니다.

    - 위탁받는 자 (수탁자): Google Firebase
    - 위탁하는 업무의 내용: 회원제 서비스 이용에 따른 본인확인, 데이터 저장 및 분석

    ## 5. 정보주체와 법정대리인의 권리·의무 및 그 행사방법

    정보주체는 HAU에 대해 언제든지 개인정보 열람·정정·삭제·처리정지 요구 등의 권리를 행사할 수 있습니다.

    ## 6. 처리하는 개인정보의 항목

    HAU은(는) 다음의 개인정보 항목을 처리하고 있습니다.

    - 필수항목: 이메일, 비밀번호, 이름, 생년월일
    - 선택항목: 프로필 사진, 관심사

    ## 7. 개인정보의 파기

    HAU은(는) 원칙적으로 개인정보 처리목적이 달성된 경우에는 지체없이 해당 개인정보를 파기합니다. 파기의 절차, 기한 및 방법은 다음과 같습니다.

    - 파기절차: 이용자가 입력한 정보는 목적 달성 후 별도의 DB에 옮겨져 내부 방침 및 기타 관련 법령에 따라 일정기간 저장된 후 혹은 즉시 파기됩니다.
    - 파기기한: 이용자의 개인정보는 개인정보의 보유기간이 경과된 경우에는 보유기간의 종료일로부터 5일 이내에, 개인정보의 처리 목적 달성, 해당 서비스의 폐지, 사업의 종료 등 그 개인정보가 불필요하게 되었을 때에는 개인정보의 처리가 불필요한 것으로 인정되는 날로부터 5일 이내에 그 개인정보를 파기합니다.

    ## 8. 개인정보 자동 수집 장치의 설치·운영 및 거부에 관한 사항

    HAU은(는) 정보주체의 이용정보를 저장하고 수시로 불러오는 '쿠키(cookie)'를 사용하지 않습니다.

    ## 9. 개인정보 보호책임자

    HAU은(는) 개인정보 처리에 관한 업무를 총괄해서 책임지고, 개인정보 처리와 관련한 정보주체의 불만처리 및 피해구제 등을 위하여 아래와 같이 개인정보 보호책임자를 지정하고 있습니다.

    - 개인정보 보호책임자: 홍길동
    - 연락처: privacy@hau-app.com

    ## 10. 개인정보 처리방침 변경

    이 개인정보처리방침은 2023년 9월 1일부터 적용됩니다.
    """
    
    var body: some View {
        VStack(spacing: 0) {
            // 헤더
            HeaderView(
                onPress: { dismiss() },
                title: "개인정보처리방침"
            )
            
            // 개인정보처리방침 내용
            ScrollView {
                VStack(alignment: .leading, spacing: 16) {
                    Text(try! AttributedString(markdown: privacyPolicyContent))
                        .font(.system(size: 14))
                        .foregroundColor(AppTheme.Colors.text)
                }
                .padding(.horizontal, 20)
                .padding(.vertical, 16)
            }
        }
        .background(Color.white.edgesIgnoringSafeArea(.all))
        .navigationBarHidden(true)
    }
}
